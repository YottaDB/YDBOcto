
-- TDCQ01 : OCTO985 : DBeaver : Connect queries

-- The below are various queries that were found to be issued through DBeaver.
-- Some of them issue errors in Octo, but those still let Octo navigate table/column data/metadata and so they are not fixed yet.

-- [ERROR]: ERR_UNKNOWN_FUNCTION: No function pg_catalog.pg_encoding_to_char defined with given parameter types (INTEGER)
SELECT c.contoencoding as encid,pg_catalog.pg_encoding_to_char(c.contoencoding) as encname FROM pg_catalog.pg_conversion c GROUP BY c.contoencoding ORDER BY 2;

-- [ERROR]: ERR_UNKNOWN_TABLE: Unknown table: pg_catalog.pg_get_keywords
select string_agg(word, ',') from pg_catalog.pg_get_keywords() where word <> ALL ('{a,abs,absolute,action,ada,add,admin,after,all,allocate,alter,always,and,any,are,array,as,asc,asensitive,assertion,assignment,asymmetric,at,atomic,attribute,attributes,authorization,avg,before,begin,bernoulli,between,bigint,binary,blob,boolean,both,breadth,by,c,call,called,cardinality,cascade,cascaded,case,cast,catalog,catalog_name,ceil,ceiling,chain,char,char_length,character,character_length,character_set_catalog,character_set_name,character_set_schema,characteristics,characters,check,checked,class_origin,clob,close,coalesce,cobol,code_units,collate,collation,collation_catalog,collation_name,collation_schema,collect,column,column_name,command_function,command_function_code,commit,committed,condition,condition_number,connect,connection_name,constraint,constraint_catalog,constraint_name,constraint_schema,constraints,constructors,contains,continue,convert,corr,corresponding,count,covar_pop,covar_samp,create,cross,cube,cume_dist,current,current_collation,current_date,current_default_transform_group,current_path,current_role,current_time,current_timestamp,current_transform_group_for_type,current_user,cursor,cursor_name,cycle,data,date,datetime_interval_code,datetime_interval_precision,day,deallocate,dec,decimal,declare,default,defaults,deferrable,deferred,defined,definer,degree,delete,dense_rank,depth,deref,derived,desc,describe,descriptor,deterministic,diagnostics,disconnect,dispatch,distinct,domain,double,drop,dynamic,dynamic_function,dynamic_function_code,each,element,else,end,end-exec,equals,escape,every,except,exception,exclude,excluding,exec,execute,exists,exp,external,extract,false,fetch,filter,final,first,float,floor,following,for,foreign,fortran,found,free,from,full,function,fusion,g,general,get,global,go,goto,grant,granted,group,grouping,having,hierarchy,hold,hour,identity,immediate,implementation,in,including,increment,indicator,initially,inner,inout,input,insensitive,insert,instance,instantiable,int,integer,intersect,intersection,interval,into,invoker,is,isolation,join,k,key,key_member,key_type,language,large,last,lateral,leading,left,length,level,like,ln,local,localtime,localtimestamp,locator,lower,m,map,match,matched,max,maxvalue,member,merge,message_length,message_octet_length,message_text,method,min,minute,minvalue,mod,modifies,module,month,more,multiset,mumps,name,names,national,natural,nchar,nclob,nesting,new,next,no,none,normalize,normalized,not,"null",nullable,nullif,nulls,number,numeric,object,octet_length,octets,of,old,on,only,open,option,options,or,order,ordering,ordinality,others,out,outer,output,over,overlaps,overlay,overriding,pad,parameter,parameter_mode,parameter_name,parameter_ordinal_position,parameter_specific_catalog,parameter_specific_name,parameter_specific_schema,partial,partition,pascal,path,percent_rank,percentile_cont,percentile_disc,placing,pli,position,power,preceding,precision,prepare,preserve,primary,prior,privileges,procedure,public,range,rank,read,reads,real,recursive,ref,references,referencing,regr_avgx,regr_avgy,regr_count,regr_intercept,regr_r2,regr_slope,regr_sxx,regr_sxy,regr_syy,relative,release,repeatable,restart,result,return,returned_cardinality,returned_length,returned_octet_length,returned_sqlstate,returns,revoke,right,role,rollback,rollup,routine,routine_catalog,routine_name,routine_schema,row,row_count,row_number,rows,savepoint,scale,schema,schema_name,scope_catalog,scope_name,scope_schema,scroll,search,second,section,security,select,self,sensitive,sequence,serializable,server_name,session,session_user,set,sets,similar,simple,size,smallint,some,source,space,specific,specific_name,specifictype,sql,sqlexception,sqlstate,sqlwarning,sqrt,start,state,statement,static,stddev_pop,stddev_samp,structure,style,subclass_origin,submultiset,substring,sum,symmetric,system,system_user,table,table_name,tablesample,temporary,then,ties,time,timestamp,timezone_hour,timezone_minute,to,top_level_count,trailing,transaction,transaction_active,transactions_committed,transactions_rolled_back,transform,transforms,translate,translation,treat,trigger,trigger_catalog,trigger_name,trigger_schema,trim,true,type,uescape,unbounded,uncommitted,under,union,unique,unknown,unnamed,unnest,update,upper,usage,user,user_defined_type_catalog,user_defined_type_code,user_defined_type_name,user_defined_type_schema,using,value,values,var_pop,var_samp,varchar,varying,view,when,whenever,where,width_bucket,window,with,within,without,work,write,year,zone}'::text;

-- The below issued a syntax error in Octo.
SHOW TRANSACTION ISOLATION LEVEL;

-- The below query used $1 in DBeaver but has been replaced with 1 for automated test purposes
SELECT i.*,c.relnamespace FROM pg_catalog.pg_inherits i,pg_catalog.pg_class c WHERE i.inhrelid=1 AND c.oid=i.inhparent ORDER BY i.inhseqno;

-- The below query used $1 in DBeaver but has been replaced with 'name' for automated test purposes
select description from pg_shdescription join pg_database on objoid = pg_database.oid where datname = 'name';

-- The below queries issued no errors in Octo
SELECT r.oid,r.*, pg_get_ruledef(r.oid) AS definition FROM pg_rewrite r WHERE r.ev_class=81 AND r.rulename <> '_RETURN'::name;
select * from pg_catalog.pg_policies where schemaname='efgh' and tablename='abcd';
SELECT a.oid,a.*,pd.description FROM pg_catalog.pg_roles a left join pg_catalog.pg_shdescription pd on a.oid = pd.objoid ORDER BY a.rolname;
SELECT c.oid,c.*,d.description,pg_catalog.pg_get_expr(c.relpartbound, c.oid) as partition_expr, pg_catalog.pg_get_partkeydef(c.oid) as partition_key , dep.objid, dep.refobjsubid FROM pg_catalog.pg_class c LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_class'::regclass LEFT OUTER JOIN pg_depend dep on dep.refobjid = c."oid" AND dep.deptype = 'i' and dep.refobjsubid <> 0 and dep.classid = dep.refclassid WHERE c.relnamespace=1 AND c.relkind not in ('i','I','c');
SELECT c.oid,c.*,t.relname as tabrelname,rt.relnamespace as refnamespace,d.description, case when c.contype='c' then "substring"(pg_get_constraintdef(c.oid), 7) else null end consrc_copy FROM pg_catalog.pg_constraint c INNER JOIN pg_catalog.pg_class t ON t.oid=c.conrelid LEFT OUTER JOIN pg_catalog.pg_class rt ON rt.oid=c.confrelid LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_constraint'::regclass WHERE c.conrelid=1 ORDER BY c.oid;
select c.oid,pg_catalog.pg_total_relation_size(c.oid) as total_rel_size,pg_catalog.pg_relation_size(c.oid) as rel_size FROM pg_class c WHERE c.relnamespace=1;
SELECT c.relname,a.*,pg_catalog.pg_get_expr(ad.adbin, ad.adrelid, true) as def_value,dsc.description FROM pg_catalog.pg_attribute a INNER JOIN pg_catalog.pg_class c ON (a.attrelid=c.oid) LEFT OUTER JOIN pg_catalog.pg_attrdef ad ON (a.attrelid=ad.adrelid AND a.attnum = ad.adnum) LEFT OUTER JOIN pg_catalog.pg_description dsc ON (c.oid=dsc.objoid AND a.attnum = dsc.objsubid) WHERE NOT a.attisdropped AND c.oid=1 ORDER BY a.attnum;
SELECT db.oid,db.* FROM pg_catalog.pg_database db WHERE datname='names';
SELECT DISTINCT connamespace FROM pg_catalog.pg_constraint WHERE confrelid=1;
SELECT i.*,i.indkey as keys,c.relname,c.relnamespace,c.relam,c.reltablespace,tc.relname as tabrelname,dsc.description,pg_catalog.pg_get_expr(i.indpred, i.indrelid) as pred_expr,pg_catalog.pg_get_expr(i.indexprs, i.indrelid, true) as expr,pg_catalog.pg_relation_size(i.indexrelid) as index_rel_size,pg_catalog.pg_stat_get_numscans(i.indexrelid) as index_num_scans FROM pg_catalog.pg_index i INNER JOIN pg_catalog.pg_class c ON c.oid=i.indexrelid INNER JOIN pg_catalog.pg_class tc ON tc.oid=i.indrelid LEFT OUTER JOIN pg_catalog.pg_description dsc ON i.indexrelid=dsc.objoid WHERE i.indrelid=1 ORDER BY c.relname;
SELECT x.oid,x.*,p.pronamespace as func_schema_id,d.description FROM pg_catalog.pg_trigger x LEFT OUTER JOIN pg_catalog.pg_proc p ON p.oid=x.tgfoid LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=x.oid AND d.objsubid=0 WHERE x.tgrelid = 1 AND NOT x.tgisinternal;
SELECT t.oid,t.*,pg_tablespace_location(t.oid) loc FROM pg_catalog.pg_tablespace t ORDER BY t.oid;

select c.relname, attname, format_type(a.atttypid, a.atttypmod) from pg_attribute a, pg_class c where a.attrelid = c.oid and attnum > 0;

SELECT c.oid,c.*,d.description,pg_catalog.pg_get_expr(c.relpartbound, c.oid) as partition_expr,  pg_catalog.pg_get_partkeydef(c.oid) as partition_key , dep.objid, dep.refobjsubid
FROM pg_catalog.pg_class c
LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_class'::regclass
LEFT OUTER JOIN pg_depend dep on dep.refobjid = c."oid" AND dep.deptype = 'i' and dep.refobjsubid <> 0 and dep.classid = dep.refclassid
WHERE c.relnamespace=2200 AND c.relkind not in ('i','I','c');

SELECT c.oid,c.*,d.description,pg_catalog.pg_get_expr(c.relpartbound, c.oid) as partition_expr,  pg_catalog.pg_get_partkeydef(c.oid) as partition_key
FROM pg_catalog.pg_class c
LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_class'::regclass
WHERE c.relnamespace=2200 AND c.relkind not in ('i','I','c');

-- 20-way LEFT JOIN DBeaver query with * as select column list and NO WHERE clause
-- Also at https://gitlab.com/YottaDB/DBMS/YDBOcto/-/issues/985#note_1496159032
SELECT count(*)
FROM pg_depend dep
LEFT JOIN pg_class cl ON dep.objid=cl.oid
LEFT JOIN pg_attribute att ON dep.objid=att.attrelid AND dep.objsubid=att.attnum
LEFT JOIN pg_namespace nsc ON cl.relnamespace=nsc.oid
LEFT JOIN pg_proc pr ON dep.objid=pr.oid
LEFT JOIN pg_namespace nsp ON pr.pronamespace=nsp.oid
LEFT JOIN pg_trigger tg ON dep.objid=tg.oid
LEFT JOIN pg_class tgr ON tg.tgrelid=tgr.oid
LEFT JOIN pg_namespace tgrn ON tgr.relnamespace=tgrn.oid
LEFT JOIN pg_type ty ON dep.objid=ty.oid
LEFT JOIN pg_namespace nst ON ty.typnamespace=nst.oid
LEFT JOIN pg_constraint co ON dep.objid=co.oid
LEFT JOIN pg_class coc ON co.conrelid=coc.oid
LEFT JOIN pg_namespace nso ON co.connamespace=nso.oid
LEFT JOIN pg_rewrite rw ON dep.objid=rw.oid
LEFT JOIN pg_class clrw ON clrw.oid=rw.ev_class
LEFT JOIN pg_namespace nsrw ON clrw.relnamespace=nsrw.oid
LEFT JOIN pg_language la ON dep.objid=la.oid
LEFT JOIN pg_namespace ns ON dep.objid=ns.oid
LEFT JOIN pg_attrdef ad ON ad.oid=dep.objid
LEFT JOIN pg_attribute attr ON attr.attrelid=ad.adrelid and attr.attnum=ad.adnum;

-- Actual 20-way LEFT JOIN query when clicking Dependencies in DBeaver client
-- Also at https://gitlab.com/YottaDB/DBMS/YDBOcto/-/issues/985#note_1523644251
SELECT DISTINCT dep.deptype, dep.classid, dep.objid, cl.relkind, attr.attname,pg_get_expr(ad.adbin, ad.adrelid) adefval,
    CASE WHEN cl.relkind IS NOT NULL THEN cl.relkind::text || COALESCE(dep.objsubid::text, '')::text
        WHEN tg.oid IS NOT NULL THEN 'T'::text
        WHEN ty.oid IS NOT NULL THEN 'y'::text
        WHEN ns.oid IS NOT NULL THEN 'n'::text
        WHEN pr.oid IS NOT NULL THEN 'p'::text
        WHEN la.oid IS NOT NULL THEN 'l'::text
        WHEN rw.oid IS NOT NULL THEN 'R'::text
        WHEN co.oid IS NOT NULL THEN 'C'::text || contype::text
        WHEN ad.oid IS NOT NULL THEN 'A'::text
        ELSE ''
    END AS type,
    COALESCE(coc.relname, clrw.relname, tgr.relname) AS ownertable,
    CASE WHEN cl.relname IS NOT NULL AND att.attname IS NOT NULL THEN cl.relname || '.' || att.attname
    ELSE COALESCE(cl.relname, co.conname, pr.proname, tg.tgname, ty.typname, la.lanname, rw.rulename, ns.nspname)
    END AS refname,
    COALESCE(nsc.nspname, nso.nspname, nsp.nspname, nst.nspname, nsrw.nspname, tgrn.nspname) AS nspname
FROM pg_depend dep
LEFT JOIN pg_class cl ON dep.objid=cl.oid
LEFT JOIN pg_attribute att ON dep.objid=att.attrelid AND dep.objsubid=att.attnum
LEFT JOIN pg_namespace nsc ON cl.relnamespace=nsc.oid
LEFT JOIN pg_proc pr ON dep.objid=pr.oid
LEFT JOIN pg_namespace nsp ON pr.pronamespace=nsp.oid
LEFT JOIN pg_trigger tg ON dep.objid=tg.oid
LEFT JOIN pg_class tgr ON tg.tgrelid=tgr.oid
LEFT JOIN pg_namespace tgrn ON tgr.relnamespace=tgrn.oid
LEFT JOIN pg_type ty ON dep.objid=ty.oid
LEFT JOIN pg_namespace nst ON ty.typnamespace=nst.oid
LEFT JOIN pg_constraint co ON dep.objid=co.oid
LEFT JOIN pg_class coc ON co.conrelid=coc.oid
LEFT JOIN pg_namespace nso ON co.connamespace=nso.oid
LEFT JOIN pg_rewrite rw ON dep.objid=rw.oid
LEFT JOIN pg_class clrw ON clrw.oid=rw.ev_class
LEFT JOIN pg_namespace nsrw ON clrw.relnamespace=nsrw.oid
LEFT JOIN pg_language la ON dep.objid=la.oid
LEFT JOIN pg_namespace ns ON dep.objid=ns.oid
LEFT JOIN pg_attrdef ad ON ad.oid=dep.objid
LEFT JOIN pg_attribute attr ON attr.attrelid=ad.adrelid and attr.attnum=ad.adnum
WHERE dep.refobjid=1
ORDER BY type;

[ERROR]: ERR_UNKNOWN_FUNCTION: No function pg_catalog.pg_encoding_to_char defined with given parameter types (INTEGER)
LINE 4:1: ...ncoding as encid,pg_catalog.pg_encoding_to_char(c.contoencoding)...
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OCTO> SELECT c.contoencoding as encid,pg_catalog.pg_encoding_to_char(c.contoencoding) as encname FROM pg_catalog.pg_conversion c GROUP BY c.contoencoding ORDER BY 2;
[ERROR]: ERR_UNKNOWN_TABLE: Unknown table: pg_catalog.pg_get_keywords
LINE 6:1: ...gg(word, ',') from pg_catalog.pg_get_keywords() where word <> AL...
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^
OCTO> select string_agg(word, ',') from pg_catalog.pg_get_keywords() where word <> ALL ('{a,abs,absolute,action,ada,add,admin,after,all,allocate,alter,always,and,any,are,array,as,asc,asensitive,assertion,assignment,asymmetric,at,atomic,attribute,attributes,authorization,avg,before,begin,bernoulli,between,bigint,binary,blob,boolean,both,breadth,by,c,call,called,cardinality,cascade,cascaded,case,cast,catalog,catalog_name,ceil,ceiling,chain,char,char_length,character,character_length,character_set_catalog,character_set_name,character_set_schema,characteristics,characters,check,checked,class_origin,clob,close,coalesce,cobol,code_units,collate,collation,collation_catalog,collation_name,collation_schema,collect,column,column_name,command_function,command_function_code,commit,committed,condition,condition_number,connect,connection_name,constraint,constraint_catalog,constraint_name,constraint_schema,constraints,constructors,contains,continue,convert,corr,corresponding,count,covar_pop,covar_samp,create,cross,cube,cume_dist,current,current_collation,current_date,current_default_transform_group,current_path,current_role,current_time,current_timestamp,current_transform_group_for_type,current_user,cursor,cursor_name,cycle,data,date,datetime_interval_code,datetime_interval_precision,day,deallocate,dec,decimal,declare,default,defaults,deferrable,deferred,defined,definer,degree,delete,dense_rank,depth,deref,derived,desc,describe,descriptor,deterministic,diagnostics,disconnect,dispatch,distinct,domain,double,drop,dynamic,dynamic_function,dynamic_function_code,each,element,else,end,end-exec,equals,escape,every,except,exception,exclude,excluding,exec,execute,exists,exp,external,extract,false,fetch,filter,final,first,float,floor,following,for,foreign,fortran,found,free,from,full,function,fusion,g,general,get,global,go,goto,grant,granted,group,grouping,having,hierarchy,hold,hour,identity,immediate,implementation,in,including,increment,indicator,initially,inner,inout,input,insensitive,insert,instance,instantiable,int,integer,intersect,intersection,interval,into,invoker,is,isolation,join,k,key,key_member,key_type,language,large,last,lateral,leading,left,length,level,like,ln,local,localtime,localtimestamp,locator,lower,m,map,match,matched,max,maxvalue,member,merge,message_length,message_octet_length,message_text,method,min,minute,minvalue,mod,modifies,module,month,more,multiset,mumps,name,names,national,natural,nchar,nclob,nesting,new,next,no,none,normalize,normalized,not,"null",nullable,nullif,nulls,number,numeric,object,octet_length,octets,of,old,on,only,open,option,options,or,order,ordering,ordinality,others,out,outer,output,over,overlaps,overlay,overriding,pad,parameter,parameter_mode,parameter_name,parameter_ordinal_position,parameter_specific_catalog,parameter_specific_name,parameter_specific_schema,partial,partition,pascal,path,percent_rank,percentile_cont,percentile_disc,placing,pli,position,power,preceding,precision,prepare,preserve,primary,prior,privileges,procedure,public,range,rank,read,reads,real,recursive,ref,references,referencing,regr_avgx,regr_avgy,regr_count,regr_intercept,regr_r2,regr_slope,regr_sxx,regr_sxy,regr_syy,relative,release,repeatable,restart,result,return,returned_cardinality,returned_length,returned_octet_length,returned_sqlstate,returns,revoke,right,role,rollback,rollup,routine,routine_catalog,routine_name,routine_schema,row,row_count,row_number,rows,savepoint,scale,schema,schema_name,scope_catalog,scope_name,scope_schema,scroll,search,second,section,security,select,self,sensitive,sequence,serializable,server_name,session,session_user,set,sets,similar,simple,size,smallint,some,source,space,specific,specific_name,specifictype,sql,sqlexception,sqlstate,sqlwarning,sqrt,start,state,statement,static,stddev_pop,stddev_samp,structure,style,subclass_origin,submultiset,substring,sum,symmetric,system,system_user,table,table_name,tablesample,temporary,then,ties,time,timestamp,timezone_hour,timezone_minute,to,top_level_count,trailing,transaction,transaction_active,transactions_committed,transactions_rolled_back,transform,transforms,translate,translation,treat,trigger,trigger_catalog,trigger_name,trigger_schema,trim,true,type,uescape,unbounded,uncommitted,under,union,unique,unknown,unnamed,unnest,update,upper,usage,user,user_defined_type_catalog,user_defined_type_code,user_defined_type_name,user_defined_type_schema,using,value,values,var_pop,var_samp,varchar,varying,view,when,whenever,where,width_bucket,window,with,within,without,work,write,year,zone}'::text;
[ERROR]: ERR_PARSE_FAILED: syntax error, unexpected IDENTIFIER_ALONE, expecting SEMICOLON or ENDOFFILE
LINE 8:1: SHOW TRANSACTION ISOLATION LEVEL;
                           ^^^^^^^^^
OCTO> SHOW TRANSACTION ISOLATION LEVEL;
OCTO> SELECT i.*,c.relnamespace FROM pg_catalog.pg_inherits i,pg_catalog.pg_class c WHERE i.inhrelid=1 AND c.oid=i.inhparent ORDER BY i.inhseqno;
inhrelid|inhparent|inhseqno|relnamespace
(0 rows)
OCTO> select description from pg_shdescription join pg_database on objoid = pg_database.oid where datname = 'name';
description
(0 rows)
OCTO> SELECT r.oid,r.*, pg_get_ruledef(r.oid) AS definition FROM pg_rewrite r WHERE r.ev_class=81 AND r.rulename <> '_RETURN'::name;
oid|oid|rulename|ev_class|ev_type|ev_enabled|is_instead|ev_qual|ev_action|definition
(0 rows)
OCTO> select * from pg_catalog.pg_policies where schemaname='efgh' and tablename='abcd';
schemaname|tablename|policyname|permissive|roles|cmd|qual|with_check
(0 rows)
OCTO> SELECT a.oid,a.*,pd.description FROM pg_catalog.pg_roles a left join pg_catalog.pg_shdescription pd on a.oid = pd.objoid ORDER BY a.rolname;
oid|rolname|rolsuper|rolinherit|rolcreaterole|rolcreatedb|rolcanlogin|rolreplication|rolconnlimit|rolpassword|rolvaliduntil|rolbypassrls|rolconfig|oid|description
(0 rows)
OCTO> SELECT c.oid,c.*,d.description,pg_catalog.pg_get_expr(c.relpartbound, c.oid) as partition_expr, pg_catalog.pg_get_partkeydef(c.oid) as partition_key , dep.objid, dep.refobjsubid FROM pg_catalog.pg_class c LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_class'::regclass LEFT OUTER JOIN pg_depend dep on dep.refobjid = c."oid" AND dep.deptype = 'i' and dep.refobjsubid <> 0 and dep.classid = dep.refclassid WHERE c.relnamespace=1 AND c.relkind not in ('i','I','c');
oid|relname|relnamespace|reltype|reloftype|relowner|relam|relfilenode|reltablespace|relpages|reltuples|relallvisible|reltoastrelid|relhasindex|relisshared|relpersistence|relkind|relnatts|relchecks|relhasoids|relhaspkey|relhasrules|relhastriggers|relhassubclass|relrowsecurity|relforcerowsecurity|relispopulated|relreplident|relispartition|relfrozenxid|relminmxid|relacl|reloptions|relpartbound|oid|description|partition_expr|partition_key|objid|refobjsubid
(0 rows)
OCTO> SELECT c.oid,c.*,t.relname as tabrelname,rt.relnamespace as refnamespace,d.description, case when c.contype='c' then "substring"(pg_get_constraintdef(c.oid), 7) else null end consrc_copy FROM pg_catalog.pg_constraint c INNER JOIN pg_catalog.pg_class t ON t.oid=c.conrelid LEFT OUTER JOIN pg_catalog.pg_class rt ON rt.oid=c.confrelid LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_constraint'::regclass WHERE c.conrelid=1 ORDER BY c.oid;
oid|conname|connamespace|contype|condeferrable|condeferred|convalidated|conrelid|contypid|conindid|confrelid|confupdtype|confdeltype|confmatchtype|conislocal|coninhcount|connoinherit|conkey|confkey|conpfeqop|conppeqop|conffeqop|conexclop|conbin|consrc|oid|tabrelname|refnamespace|description|consrc_copy
(0 rows)
OCTO> select c.oid,pg_catalog.pg_total_relation_size(c.oid) as total_rel_size,pg_catalog.pg_relation_size(c.oid) as rel_size FROM pg_class c WHERE c.relnamespace=1;
oid|total_rel_size|rel_size
(0 rows)
OCTO> SELECT c.relname,a.*,pg_catalog.pg_get_expr(ad.adbin, ad.adrelid, true) as def_value,dsc.description FROM pg_catalog.pg_attribute a INNER JOIN pg_catalog.pg_class c ON (a.attrelid=c.oid) LEFT OUTER JOIN pg_catalog.pg_attrdef ad ON (a.attrelid=ad.adrelid AND a.attnum = ad.adnum) LEFT OUTER JOIN pg_catalog.pg_description dsc ON (c.oid=dsc.objoid AND a.attnum = dsc.objsubid) WHERE NOT a.attisdropped AND c.oid=1 ORDER BY a.attnum;
relname|attrelid|attname|atttypid|attstattarget|attlen|attnum|attndims|attcacheoff|atttypmod|attbyval|attstorage|attalign|attnotnull|atthasdef|atthasmissing|attgenerated|attidentity|attisdropped|attislocal|attinhcount|attcollation|attacl|attoptions|attfdwoptions|attmissingval|oid|def_value|description
octoonerowtable|1|id|23|-1|4|1|0|-1|-1|1|p|i|1|0|0||1|0|0|0|||||
(1 row)
OCTO> SELECT db.oid,db.* FROM pg_catalog.pg_database db WHERE datname='names';
oid|datname|datdba|encoding|datcollate|datctype|datistemplate|datallowconn|datconnlimit|datlastsysoid|datfrozenxid|datminmxid|dattablespace|datacl|oid
(0 rows)
OCTO> SELECT DISTINCT connamespace FROM pg_catalog.pg_constraint WHERE confrelid=1;
connamespace
(0 rows)
OCTO> SELECT i.*,i.indkey as keys,c.relname,c.relnamespace,c.relam,c.reltablespace,tc.relname as tabrelname,dsc.description,pg_catalog.pg_get_expr(i.indpred, i.indrelid) as pred_expr,pg_catalog.pg_get_expr(i.indexprs, i.indrelid, true) as expr,pg_catalog.pg_relation_size(i.indexrelid) as index_rel_size,pg_catalog.pg_stat_get_numscans(i.indexrelid) as index_num_scans FROM pg_catalog.pg_index i INNER JOIN pg_catalog.pg_class c ON c.oid=i.indexrelid INNER JOIN pg_catalog.pg_class tc ON tc.oid=i.indrelid LEFT OUTER JOIN pg_catalog.pg_description dsc ON i.indexrelid=dsc.objoid WHERE i.indrelid=1 ORDER BY c.relname;
indexrelid|indrelid|indnatts|indisunique|indisprimary|indisexclusion|indimmediate|indisclustered|indisvalid|indcheckxmin|indisready|indislive|indisreplident|indkey|indcollation|indclass|indoption|indexprs|indpred|oid|keys|relname|relnamespace|relam|reltablespace|tabrelname|description|pred_expr|expr|index_rel_size|index_num_scans
(0 rows)
OCTO> SELECT x.oid,x.*,p.pronamespace as func_schema_id,d.description FROM pg_catalog.pg_trigger x LEFT OUTER JOIN pg_catalog.pg_proc p ON p.oid=x.tgfoid LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=x.oid AND d.objsubid=0 WHERE x.tgrelid = 1 AND NOT x.tgisinternal;
oid|oid|tgrelid|tgname|tgfoid|tgtype|tgenabled|tgisinternal|tgconstrrelid|tgconstrindid|tgconstraint|tgdeferrable|tginitdeferred|tgnargs|tgattr|tgargs|tgqual|tgoldtable|tgnewtable|func_schema_id|description
(0 rows)
OCTO> SELECT t.oid,t.*,pg_tablespace_location(t.oid) loc FROM pg_catalog.pg_tablespace t ORDER BY t.oid;
oid|oid|spcname|spcowner|spcacl|spcoptions|loc
(0 rows)
OCTO> select c.relname, attname, format_type(a.atttypid, a.atttypmod) from pg_attribute a, pg_class c where a.attrelid = c.oid and attnum > 0;
relname|attname|format_type
octoonerowtable|id|integer
pg_catalog.pg_namespace|nspname|varchar
pg_catalog.pg_type|typname|varchar(25)
pg_catalog.pg_class|relname|varchar
pg_catalog.pg_description|objoid|integer
information_schema.tables|oid|integer
pg_catalog.pg_proc|proname|varchar
pg_catalog.pg_attribute|attrelid|integer
pg_catalog.pg_attrdef|adrelid|integer
pg_catalog.pg_settings|name|varchar
pg_catalog.pg_database|datname|varchar
pg_catalog.pg_roles|rolname|varchar
pg_catalog.pg_user|usename|varchar
pg_catalog.pg_range|rngsubtype|integer
pg_catalog.pg_enum|enumtypid|integer
pg_catalog.pg_index|indexrelid|integer
pg_catalog.pg_constraint|conname|varchar
pg_catalog.pg_am|amname|varchar
pg_catalog.pg_depend|classid|integer
pg_catalog.pg_trigger|oid|integer
pg_catalog.pg_tablespace|oid|integer
pg_catalog.pg_shdescription|objoid|integer
pg_catalog.pg_inherits|inhrelid|integer
pg_catalog.pg_policies|schemaname|varchar
pg_catalog.pg_rewrite|oid|integer
pg_catalog.pg_conversion|oid|integer
pg_catalog.pg_aggregate|aggfnoid|integer
pg_catalog.pg_language|oid|integer
pg_namespace|nspname|varchar
pg_type|typname|varchar(25)
pg_class|relname|varchar
pg_description|objoid|integer
pg_proc|proname|varchar
pg_attribute|attrelid|integer
pg_attrdef|adrelid|integer
pg_settings|name|varchar
pg_database|datname|varchar
pg_roles|rolname|varchar
pg_user|usename|varchar
pg_range|rngsubtype|integer
pg_enum|enumtypid|integer
pg_index|indexrelid|integer
pg_constraint|conname|varchar
pg_am|amname|varchar
pg_depend|classid|integer
pg_trigger|oid|integer
pg_tablespace|oid|integer
pg_shdescription|objoid|integer
pg_inherits|inhrelid|integer
pg_policies|schemaname|varchar
pg_rewrite|oid|integer
pg_conversion|oid|integer
pg_aggregate|aggfnoid|integer
pg_language|oid|integer
names|id|integer
nameswithages|id|integer
pg_catalog.pg_namespace|nspowner|integer
pg_catalog.pg_type|typnamespace|integer
pg_catalog.pg_class|relnamespace|integer
pg_catalog.pg_description|classoid|integer
information_schema.tables|table_catalog|varchar
pg_catalog.pg_proc|pronamespace|integer
pg_catalog.pg_attribute|attname|varchar
pg_catalog.pg_attrdef|adnum|integer
pg_catalog.pg_settings|setting|varchar
pg_catalog.pg_database|datdba|integer
pg_catalog.pg_roles|rolsuper|boolean
pg_catalog.pg_user|usersysid|integer
pg_catalog.pg_range|rngcollation|integer
pg_catalog.pg_enum|enumsortorder|numeric
pg_catalog.pg_index|indrelid|integer
pg_catalog.pg_constraint|connamespace|integer
pg_catalog.pg_am|amhandler|varchar
pg_catalog.pg_depend|objid|integer
pg_catalog.pg_trigger|tgrelid|integer
pg_catalog.pg_tablespace|spcname|varchar
pg_catalog.pg_shdescription|classoid|integer
pg_catalog.pg_inherits|inhparent|integer
pg_catalog.pg_policies|tablename|varchar
pg_catalog.pg_rewrite|rulename|varchar
pg_catalog.pg_conversion|conname|varchar
pg_catalog.pg_aggregate|aggkind|varchar
pg_catalog.pg_language|lanname|varchar
pg_namespace|nspowner|integer
pg_type|typnamespace|integer
pg_class|relnamespace|integer
pg_description|classoid|integer
pg_proc|pronamespace|integer
pg_attribute|attname|varchar
pg_attrdef|adnum|integer
pg_settings|setting|varchar
pg_database|datdba|integer
pg_roles|rolsuper|boolean
pg_user|usersysid|integer
pg_range|rngcollation|integer
pg_enum|enumsortorder|numeric
pg_index|indrelid|integer
pg_constraint|connamespace|integer
pg_am|amhandler|varchar
pg_depend|objid|integer
pg_trigger|tgrelid|integer
pg_tablespace|spcname|varchar
pg_shdescription|classoid|integer
pg_inherits|inhparent|integer
pg_policies|tablename|varchar
pg_rewrite|rulename|varchar
pg_conversion|conname|varchar
pg_aggregate|aggkind|varchar
pg_language|lanname|varchar
names|firstname|varchar(30)
nameswithages|firstname|varchar(30)
pg_catalog.pg_namespace|nspacl|varchar
pg_catalog.pg_type|typowner|integer
pg_catalog.pg_class|reltype|integer
pg_catalog.pg_description|objsubid|integer
information_schema.tables|table_schema|varchar
pg_catalog.pg_proc|proowner|integer
pg_catalog.pg_attribute|atttypid|integer
pg_catalog.pg_attrdef|adbin|varchar
pg_catalog.pg_settings|unit|varchar
pg_catalog.pg_database|encoding|integer
pg_catalog.pg_roles|rolinherit|boolean
pg_catalog.pg_user|usecreatedb|boolean
pg_catalog.pg_range|rngsubopc|integer
pg_catalog.pg_enum|enumlabel|varchar
pg_catalog.pg_index|indnatts|integer
pg_catalog.pg_constraint|contype|varchar
pg_catalog.pg_am|amtype|varchar
pg_catalog.pg_depend|objsubid|integer
pg_catalog.pg_trigger|tgname|varchar
pg_catalog.pg_tablespace|spcowner|integer
pg_catalog.pg_shdescription|description|varchar
pg_catalog.pg_inherits|inhseqno|integer
pg_catalog.pg_policies|policyname|varchar
pg_catalog.pg_rewrite|ev_class|integer
pg_catalog.pg_conversion|connamespace|integer
pg_catalog.pg_aggregate|aggnumdirectargs|integer
pg_catalog.pg_language|lanowner|integer
pg_namespace|nspacl|varchar
pg_type|typowner|integer
pg_class|reltype|integer
pg_description|objsubid|integer
pg_proc|proowner|integer
pg_attribute|atttypid|integer
pg_attrdef|adbin|varchar
pg_settings|unit|varchar
pg_database|encoding|integer
pg_roles|rolinherit|boolean
pg_user|usecreatedb|boolean
pg_range|rngsubopc|integer
pg_enum|enumlabel|varchar
pg_index|indnatts|integer
pg_constraint|contype|varchar
pg_am|amtype|varchar
pg_depend|objsubid|integer
pg_trigger|tgname|varchar
pg_tablespace|spcowner|integer
pg_shdescription|description|varchar
pg_inherits|inhseqno|integer
pg_policies|policyname|varchar
pg_rewrite|ev_class|integer
pg_conversion|connamespace|integer
pg_aggregate|aggnumdirectargs|integer
pg_language|lanowner|integer
names|lastname|varchar(30)
nameswithages|lastname|varchar(30)
pg_catalog.pg_namespace|oid|integer
pg_catalog.pg_type|typlen|integer
pg_catalog.pg_class|reloftype|integer
pg_catalog.pg_description|description|varchar
information_schema.tables|table_name|varchar
pg_catalog.pg_proc|prolang|integer
pg_catalog.pg_attribute|attstattarget|integer
pg_catalog.pg_attrdef|adsrc|varchar
pg_catalog.pg_settings|category|varchar
pg_catalog.pg_database|datcollate|varchar
pg_catalog.pg_roles|rolcreaterole|boolean
pg_catalog.pg_user|usesuper|boolean
pg_catalog.pg_range|rngcanonical|integer
pg_catalog.pg_enum|oid|integer
pg_catalog.pg_index|indisunique|boolean
pg_catalog.pg_constraint|condeferrable|boolean
pg_catalog.pg_am|oid|integer
pg_catalog.pg_depend|refclassid|integer
pg_catalog.pg_trigger|tgfoid|integer
pg_catalog.pg_tablespace|spcacl|varchar
pg_catalog.pg_shdescription|spcoptions|varchar
pg_catalog.pg_policies|permissive|varchar
pg_catalog.pg_rewrite|ev_type|varchar
pg_catalog.pg_conversion|conowner|integer
pg_catalog.pg_aggregate|aggtransfn|varchar
pg_catalog.pg_language|lanispl|boolean
pg_namespace|oid|integer
pg_type|typlen|integer
pg_class|reloftype|integer
pg_description|description|varchar
pg_proc|prolang|integer
pg_attribute|attstattarget|integer
pg_attrdef|adsrc|varchar
pg_settings|category|varchar
pg_database|datcollate|varchar
pg_roles|rolcreaterole|boolean
pg_user|usesuper|boolean
pg_range|rngcanonical|integer
pg_enum|oid|integer
pg_index|indisunique|boolean
pg_constraint|condeferrable|boolean
pg_am|oid|integer
pg_depend|refclassid|integer
pg_trigger|tgfoid|integer
pg_tablespace|spcacl|varchar
pg_shdescription|spcoptions|varchar
pg_policies|permissive|varchar
pg_rewrite|ev_type|varchar
pg_conversion|conowner|integer
pg_aggregate|aggtransfn|varchar
pg_language|lanispl|boolean
nameswithages|age|integer
pg_catalog.pg_type|typbyval|boolean
pg_catalog.pg_class|relowner|integer
pg_catalog.pg_description|oid|integer
information_schema.tables|table_type|varchar
pg_catalog.pg_proc|procost|integer
pg_catalog.pg_attribute|attlen|integer
pg_catalog.pg_attrdef|oid|integer
pg_catalog.pg_settings|short_desc|varchar
pg_catalog.pg_database|datctype|varchar
pg_catalog.pg_roles|rolcreatedb|boolean
pg_catalog.pg_user|userepl|boolean
pg_catalog.pg_range|rngsubdiff|integer
pg_catalog.pg_index|indisprimary|boolean
pg_catalog.pg_constraint|condeferred|boolean
pg_catalog.pg_depend|refobjid|integer
pg_catalog.pg_trigger|tgtype|integer
pg_catalog.pg_tablespace|spcoptions|varchar
pg_catalog.pg_policies|roles|varchar
pg_catalog.pg_rewrite|ev_enabled|varchar
pg_catalog.pg_conversion|conforencoding|integer
pg_catalog.pg_aggregate|aggfinalfn|varchar
pg_catalog.pg_language|lanpltrusted|boolean
pg_type|typbyval|boolean
pg_class|relowner|integer
pg_description|oid|integer
pg_proc|procost|integer
pg_attribute|attlen|integer
pg_attrdef|oid|integer
pg_settings|short_desc|varchar
pg_database|datctype|varchar
pg_roles|rolcreatedb|boolean
pg_user|userepl|boolean
pg_range|rngsubdiff|integer
pg_index|indisprimary|boolean
pg_constraint|condeferred|boolean
pg_depend|refobjid|integer
pg_trigger|tgtype|integer
pg_tablespace|spcoptions|varchar
pg_policies|roles|varchar
pg_rewrite|ev_enabled|varchar
pg_conversion|conforencoding|integer
pg_aggregate|aggfinalfn|varchar
pg_language|lanpltrusted|boolean
nameswithages|datetime|timestamp without time zone
pg_catalog.pg_type|typtype|varchar(25)
pg_catalog.pg_class|relam|integer
information_schema.tables|self_referencing_column_name|varchar
pg_catalog.pg_proc|prorows|integer
pg_catalog.pg_attribute|attnum|integer
pg_catalog.pg_settings|extra_desc|varchar
pg_catalog.pg_database|datistemplate|boolean
pg_catalog.pg_roles|rolcanlogin|boolean
pg_catalog.pg_user|usebypassrls|boolean
pg_catalog.pg_range|rngtypid|integer
pg_catalog.pg_index|indisexclusion|boolean
pg_catalog.pg_constraint|convalidated|boolean
pg_catalog.pg_depend|refobjsubid|integer
pg_catalog.pg_trigger|tgenabled|varchar
pg_catalog.pg_policies|cmd|varchar
pg_catalog.pg_rewrite|is_instead|boolean
pg_catalog.pg_conversion|contoencoding|integer
pg_catalog.pg_aggregate|aggcombinefn|varchar
pg_catalog.pg_language|lanplcallfoid|integer
pg_type|typtype|varchar(25)
pg_class|relam|integer
pg_proc|prorows|integer
pg_attribute|attnum|integer
pg_settings|extra_desc|varchar
pg_database|datistemplate|boolean
pg_roles|rolcanlogin|boolean
pg_user|usebypassrls|boolean
pg_range|rngtypid|integer
pg_index|indisexclusion|boolean
pg_constraint|convalidated|boolean
pg_depend|refobjsubid|integer
pg_trigger|tgenabled|varchar
pg_policies|cmd|varchar
pg_rewrite|is_instead|boolean
pg_conversion|contoencoding|integer
pg_aggregate|aggcombinefn|varchar
pg_language|lanplcallfoid|integer
pg_catalog.pg_type|typcategory|varchar(25)
pg_catalog.pg_class|relfilenode|integer
information_schema.tables|reference_generation|varchar
pg_catalog.pg_proc|provariadic|integer
pg_catalog.pg_attribute|attndims|integer
pg_catalog.pg_settings|context|varchar
pg_catalog.pg_database|datallowconn|boolean
pg_catalog.pg_roles|rolreplication|boolean
pg_catalog.pg_user|passwd|varchar
pg_catalog.pg_index|indimmediate|boolean
pg_catalog.pg_constraint|conrelid|integer
pg_catalog.pg_depend|deptype|varchar
pg_catalog.pg_trigger|tgisinternal|boolean
pg_catalog.pg_policies|qual|varchar
pg_catalog.pg_rewrite|ev_qual|varchar
pg_catalog.pg_conversion|conproc|varchar
pg_catalog.pg_aggregate|aggserialfn|varchar
pg_catalog.pg_language|laninline|integer
pg_type|typcategory|varchar(25)
pg_class|relfilenode|integer
pg_proc|provariadic|integer
pg_attribute|attndims|integer
pg_settings|context|varchar
pg_database|datallowconn|boolean
pg_roles|rolreplication|boolean
pg_user|passwd|varchar
pg_index|indimmediate|boolean
pg_constraint|conrelid|integer
pg_depend|deptype|varchar
pg_trigger|tgisinternal|boolean
pg_policies|qual|varchar
pg_rewrite|ev_qual|varchar
pg_conversion|conproc|varchar
pg_aggregate|aggserialfn|varchar
pg_language|laninline|integer
pg_catalog.pg_type|typispreferred|boolean
pg_catalog.pg_class|reltablespace|integer
information_schema.tables|user_defined_type_catalog|varchar
pg_catalog.pg_proc|protransform|varchar
pg_catalog.pg_attribute|attcacheoff|integer
pg_catalog.pg_settings|vartype|varchar
pg_catalog.pg_database|datconnlimit|integer
pg_catalog.pg_roles|rolconnlimit|integer
pg_catalog.pg_user|valuntil|varchar
pg_catalog.pg_index|indisclustered|boolean
pg_catalog.pg_constraint|contypid|integer
pg_catalog.pg_trigger|tgconstrrelid|integer
pg_catalog.pg_policies|with_check|varchar
pg_catalog.pg_rewrite|ev_action|varchar
pg_catalog.pg_conversion|condefault|boolean
pg_catalog.pg_aggregate|aggdeserialfn|varchar
pg_catalog.pg_language|lanvalidator|integer
pg_type|typispreferred|boolean
pg_class|reltablespace|integer
pg_proc|protransform|varchar
pg_attribute|attcacheoff|integer
pg_settings|vartype|varchar
pg_database|datconnlimit|integer
pg_roles|rolconnlimit|integer
pg_user|valuntil|varchar
pg_index|indisclustered|boolean
pg_constraint|contypid|integer
pg_trigger|tgconstrrelid|integer
pg_policies|with_check|varchar
pg_rewrite|ev_action|varchar
pg_conversion|condefault|boolean
pg_aggregate|aggdeserialfn|varchar
pg_language|lanvalidator|integer
pg_catalog.pg_type|typisdefined|boolean
pg_catalog.pg_class|relpages|integer
information_schema.tables|user_defined_type_schema|varchar
pg_catalog.pg_proc|prokind|varchar
pg_catalog.pg_attribute|atttypmod|integer
pg_catalog.pg_settings|source|varchar
pg_catalog.pg_database|datlastsysoid|integer
pg_catalog.pg_roles|rolpassword|varchar
pg_catalog.pg_user|userconfig|varchar
pg_catalog.pg_index|indisvalid|boolean
pg_catalog.pg_constraint|conindid|integer
pg_catalog.pg_trigger|tgconstrindid|integer
pg_catalog.pg_aggregate|aggmtransfn|varchar
pg_catalog.pg_language|lanacl|varchar
pg_type|typisdefined|boolean
pg_class|relpages|integer
pg_proc|prokind|varchar
pg_attribute|atttypmod|integer
pg_settings|source|varchar
pg_database|datlastsysoid|integer
pg_roles|rolpassword|varchar
pg_user|userconfig|varchar
pg_index|indisvalid|boolean
pg_constraint|conindid|integer
pg_trigger|tgconstrindid|integer
pg_aggregate|aggmtransfn|varchar
pg_language|lanacl|varchar
pg_catalog.pg_type|typdelim|varchar(25)
pg_catalog.pg_class|reltuples|integer
information_schema.tables|user_defined_type_name|varchar
pg_catalog.pg_proc|prosecdef|boolean
pg_catalog.pg_attribute|attbyval|boolean
pg_catalog.pg_settings|min_val|varchar
pg_catalog.pg_database|datfrozenxid|integer
pg_catalog.pg_roles|rolvaliduntil|varchar
pg_catalog.pg_index|indcheckxmin|boolean
pg_catalog.pg_constraint|confrelid|integer
pg_catalog.pg_trigger|tgconstraint|integer
pg_catalog.pg_aggregate|aggminvtransfn|varchar
pg_type|typdelim|varchar(25)
pg_class|reltuples|integer
pg_proc|prosecdef|boolean
pg_attribute|attbyval|boolean
pg_settings|min_val|varchar
pg_database|datfrozenxid|integer
pg_roles|rolvaliduntil|varchar
pg_index|indcheckxmin|boolean
pg_constraint|confrelid|integer
pg_trigger|tgconstraint|integer
pg_aggregate|aggminvtransfn|varchar
pg_catalog.pg_type|typrelid|integer
pg_catalog.pg_class|relallvisible|integer
information_schema.tables|is_insertable_into|varchar
pg_catalog.pg_proc|proleakproof|boolean
pg_catalog.pg_attribute|attstorage|varchar
pg_catalog.pg_settings|enumvals|varchar
pg_catalog.pg_database|datminmxid|integer
pg_catalog.pg_roles|rolbypassrls|boolean
pg_catalog.pg_index|indisready|boolean
pg_catalog.pg_constraint|confupdtype|varchar
pg_catalog.pg_trigger|tgdeferrable|boolean
pg_catalog.pg_aggregate|aggmfinalfn|varchar
pg_type|typrelid|integer
pg_class|relallvisible|integer
pg_proc|proleakproof|boolean
pg_attribute|attstorage|varchar
pg_settings|enumvals|varchar
pg_database|datminmxid|integer
pg_roles|rolbypassrls|boolean
pg_index|indisready|boolean
pg_constraint|confupdtype|varchar
pg_trigger|tgdeferrable|boolean
pg_aggregate|aggmfinalfn|varchar
pg_catalog.pg_type|typelem|integer
pg_catalog.pg_class|reltoastrelid|integer
information_schema.tables|is_typed|varchar
pg_catalog.pg_proc|proisstrict|boolean
pg_catalog.pg_attribute|attalign|varchar
pg_catalog.pg_settings|boot_val|varchar
pg_catalog.pg_database|dattablespace|integer
pg_catalog.pg_roles|rolconfig|varchar
pg_catalog.pg_index|indislive|boolean
pg_catalog.pg_constraint|confdeltype|varchar
pg_catalog.pg_trigger|tginitdeferred|boolean
pg_catalog.pg_aggregate|aggfinalextra|boolean
pg_type|typelem|integer
pg_class|reltoastrelid|integer
pg_proc|proisstrict|boolean
pg_attribute|attalign|varchar
pg_settings|boot_val|varchar
pg_database|dattablespace|integer
pg_roles|rolconfig|varchar
pg_index|indislive|boolean
pg_constraint|confdeltype|varchar
pg_trigger|tginitdeferred|boolean
pg_aggregate|aggfinalextra|boolean
pg_catalog.pg_type|typarray|integer
pg_catalog.pg_class|relhasindex|boolean
information_schema.tables|commit_action|varchar
pg_catalog.pg_proc|proretset|boolean
pg_catalog.pg_attribute|attnotnull|boolean
pg_catalog.pg_settings|reset_val|varchar
pg_catalog.pg_database|datacl|integer
pg_catalog.pg_roles|oid|integer
pg_catalog.pg_index|indisreplident|boolean
pg_catalog.pg_constraint|confmatchtype|varchar
pg_catalog.pg_trigger|tgnargs|integer
pg_catalog.pg_aggregate|aggmfinalextra|boolean
pg_type|typarray|integer
pg_class|relhasindex|boolean
pg_proc|proretset|boolean
pg_attribute|attnotnull|boolean
pg_settings|reset_val|varchar
pg_database|datacl|integer
pg_roles|oid|integer
pg_index|indisreplident|boolean
pg_constraint|confmatchtype|varchar
pg_trigger|tgnargs|integer
pg_aggregate|aggmfinalextra|boolean
pg_catalog.pg_type|typinput|varchar(25)
pg_catalog.pg_class|relisshared|boolean
pg_catalog.pg_proc|provolatile|varchar
pg_catalog.pg_attribute|atthasdef|boolean
pg_catalog.pg_settings|sourcefile|varchar
pg_catalog.pg_database|oid|integer
pg_catalog.pg_index|indkey|integer
pg_catalog.pg_constraint|conislocal|boolean
pg_catalog.pg_trigger|tgattr|varchar
pg_catalog.pg_aggregate|aggfinalmodify|varchar
pg_type|typinput|varchar(25)
pg_class|relisshared|boolean
pg_proc|provolatile|varchar
pg_attribute|atthasdef|boolean
pg_settings|sourcefile|varchar
pg_database|oid|integer
pg_index|indkey|integer
pg_constraint|conislocal|boolean
pg_trigger|tgattr|varchar
pg_aggregate|aggfinalmodify|varchar
pg_catalog.pg_type|typoutput|varchar(25)
pg_catalog.pg_class|relpersistence|varchar
pg_catalog.pg_proc|proparallel|varchar
pg_catalog.pg_attribute|atthasmissing|boolean
pg_catalog.pg_settings|sourceline|integer
pg_catalog.pg_index|indcollation|integer
pg_catalog.pg_constraint|coninhcount|integer
pg_catalog.pg_trigger|tgargs|varchar
pg_catalog.pg_aggregate|aggmfinalmodify|varchar
pg_type|typoutput|varchar(25)
pg_class|relpersistence|varchar
pg_proc|proparallel|varchar
pg_attribute|atthasmissing|boolean
pg_settings|sourceline|integer
pg_index|indcollation|integer
pg_constraint|coninhcount|integer
pg_trigger|tgargs|varchar
pg_aggregate|aggmfinalmodify|varchar
pg_catalog.pg_type|typreceive|integer
pg_catalog.pg_class|relkind|varchar
pg_catalog.pg_proc|pronargs|integer
pg_catalog.pg_attribute|attgenerated|varchar
pg_catalog.pg_settings|pending_restart|boolean
pg_catalog.pg_index|indclass|integer
pg_catalog.pg_constraint|connoinherit|boolean
pg_catalog.pg_trigger|tgqual|varchar
pg_catalog.pg_aggregate|aggsortop|integer
pg_type|typreceive|integer
pg_class|relkind|varchar
pg_proc|pronargs|integer
pg_attribute|attgenerated|varchar
pg_settings|pending_restart|boolean
pg_index|indclass|integer
pg_constraint|connoinherit|boolean
pg_trigger|tgqual|varchar
pg_aggregate|aggsortop|integer
pg_catalog.pg_type|typsend|varchar(25)
pg_catalog.pg_class|relnatts|integer
pg_catalog.pg_proc|pronargdefaults|integer
pg_catalog.pg_attribute|attidentity|varchar
pg_catalog.pg_index|indoption|integer
pg_catalog.pg_constraint|conkey|integer
pg_catalog.pg_trigger|tgoldtable|varchar
pg_catalog.pg_aggregate|aggtranstype|integer
pg_type|typsend|varchar(25)
pg_class|relnatts|integer
pg_proc|pronargdefaults|integer
pg_attribute|attidentity|varchar
pg_index|indoption|integer
pg_constraint|conkey|integer
pg_trigger|tgoldtable|varchar
pg_aggregate|aggtranstype|integer
pg_catalog.pg_type|typmodin|varchar(25)
pg_catalog.pg_class|relchecks|integer
pg_catalog.pg_proc|prorettype|integer
pg_catalog.pg_attribute|attisdropped|boolean
pg_catalog.pg_index|indexprs|varchar
pg_catalog.pg_constraint|confkey|integer
pg_catalog.pg_trigger|tgnewtable|varchar
pg_catalog.pg_aggregate|aggtransspace|integer
pg_type|typmodin|varchar(25)
pg_class|relchecks|integer
pg_proc|prorettype|integer
pg_attribute|attisdropped|boolean
pg_index|indexprs|varchar
pg_constraint|confkey|integer
pg_trigger|tgnewtable|varchar
pg_aggregate|aggtransspace|integer
pg_catalog.pg_type|typmodout|varchar(25)
pg_catalog.pg_class|relhasoids|boolean
pg_catalog.pg_proc|proargtypes|varchar
pg_catalog.pg_attribute|attislocal|boolean
pg_catalog.pg_index|indpred|varchar
pg_catalog.pg_constraint|conpfeqop|integer
pg_catalog.pg_aggregate|aggmtranstype|integer
pg_type|typmodout|varchar(25)
pg_class|relhasoids|boolean
pg_proc|proargtypes|varchar
pg_attribute|attislocal|boolean
pg_index|indpred|varchar
pg_constraint|conpfeqop|integer
pg_aggregate|aggmtranstype|integer
pg_catalog.pg_type|typanalyze|varchar(25)
pg_catalog.pg_class|relhaspkey|boolean
pg_catalog.pg_proc|proallargtypes|integer
pg_catalog.pg_attribute|attinhcount|integer
pg_catalog.pg_index|oid|integer
pg_catalog.pg_constraint|conppeqop|integer
pg_catalog.pg_aggregate|aggmtransspace|integer
pg_type|typanalyze|varchar(25)
pg_class|relhaspkey|boolean
pg_proc|proallargtypes|integer
pg_attribute|attinhcount|integer
pg_index|oid|integer
pg_constraint|conppeqop|integer
pg_aggregate|aggmtransspace|integer
pg_catalog.pg_type|typalign|varchar(25)
pg_catalog.pg_class|relhasrules|boolean
pg_catalog.pg_proc|proargmodes|varchar
pg_catalog.pg_attribute|attcollation|integer
pg_catalog.pg_constraint|conffeqop|integer
pg_catalog.pg_aggregate|agginitval|varchar
pg_type|typalign|varchar(25)
pg_class|relhasrules|boolean
pg_proc|proargmodes|varchar
pg_attribute|attcollation|integer
pg_constraint|conffeqop|integer
pg_aggregate|agginitval|varchar
pg_catalog.pg_type|typstorage|varchar(25)
pg_catalog.pg_class|relhastriggers|boolean
pg_catalog.pg_proc|proargnames|varchar
pg_catalog.pg_attribute|attacl|varchar
pg_catalog.pg_constraint|conexclop|integer
pg_catalog.pg_aggregate|aggminitval|varchar
pg_type|typstorage|varchar(25)
pg_class|relhastriggers|boolean
pg_proc|proargnames|varchar
pg_attribute|attacl|varchar
pg_constraint|conexclop|integer
pg_aggregate|aggminitval|varchar
pg_catalog.pg_type|typnotnull|boolean
pg_catalog.pg_class|relhassubclass|boolean
pg_catalog.pg_proc|proargdefaults|varchar
pg_catalog.pg_attribute|attoptions|varchar
pg_catalog.pg_constraint|conbin|varchar
pg_type|typnotnull|boolean
pg_class|relhassubclass|boolean
pg_proc|proargdefaults|varchar
pg_attribute|attoptions|varchar
pg_constraint|conbin|varchar
pg_catalog.pg_type|typbasetype|integer
pg_catalog.pg_class|relrowsecurity|boolean
pg_catalog.pg_proc|protrftypes|integer
pg_catalog.pg_attribute|attfdwoptions|varchar
pg_catalog.pg_constraint|consrc|varchar
pg_type|typbasetype|integer
pg_class|relrowsecurity|boolean
pg_proc|protrftypes|integer
pg_attribute|attfdwoptions|varchar
pg_constraint|consrc|varchar
pg_catalog.pg_type|typtypmod|integer
pg_catalog.pg_class|relforcerowsecurity|boolean
pg_catalog.pg_proc|prosrc|varchar
pg_catalog.pg_attribute|attmissingval|varchar
pg_catalog.pg_constraint|oid|integer
pg_type|typtypmod|integer
pg_class|relforcerowsecurity|boolean
pg_proc|prosrc|varchar
pg_attribute|attmissingval|varchar
pg_constraint|oid|integer
pg_catalog.pg_type|typndims|integer
pg_catalog.pg_class|relispopulated|boolean
pg_catalog.pg_proc|probin|varchar
pg_catalog.pg_attribute|oid|integer
pg_type|typndims|integer
pg_class|relispopulated|boolean
pg_proc|probin|varchar
pg_attribute|oid|integer
pg_catalog.pg_type|typcollation|integer
pg_catalog.pg_class|relreplident|varchar
pg_catalog.pg_proc|proconfig|varchar
pg_type|typcollation|integer
pg_class|relreplident|varchar
pg_proc|proconfig|varchar
pg_catalog.pg_type|typdefaultbin|varchar(25)
pg_catalog.pg_class|relispartition|boolean
pg_catalog.pg_proc|proacl|varchar
pg_type|typdefaultbin|varchar(25)
pg_class|relispartition|boolean
pg_proc|proacl|varchar
pg_catalog.pg_type|typdefault|varchar(25)
pg_catalog.pg_class|relfrozenxid|integer
pg_catalog.pg_proc|oid|integer
pg_type|typdefault|varchar(25)
pg_class|relfrozenxid|integer
pg_proc|oid|integer
pg_catalog.pg_type|typacl|varchar(25)
pg_catalog.pg_class|relminmxid|integer
pg_type|typacl|varchar(25)
pg_class|relminmxid|integer
pg_catalog.pg_type|oid|integer
pg_catalog.pg_class|relacl|varchar
pg_type|oid|integer
pg_class|relacl|varchar
pg_catalog.pg_class|reloptions|varchar
pg_class|reloptions|varchar
pg_catalog.pg_class|relpartbound|varchar
pg_class|relpartbound|varchar
pg_catalog.pg_class|oid|integer
pg_class|oid|integer
(696 rows)
OCTO> SELECT c.oid,c.*,d.description,pg_catalog.pg_get_expr(c.relpartbound, c.oid) as partition_expr,  pg_catalog.pg_get_partkeydef(c.oid) as partition_key , dep.objid, dep.refobjsubid
FROM pg_catalog.pg_class c
LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_class'::regclass
LEFT OUTER JOIN pg_depend dep on dep.refobjid = c."oid" AND dep.deptype = 'i' and dep.refobjsubid <> 0 and dep.classid = dep.refclassid
WHERE c.relnamespace=2200 AND c.relkind not in ('i','I','c');
oid|relname|relnamespace|reltype|reloftype|relowner|relam|relfilenode|reltablespace|relpages|reltuples|relallvisible|reltoastrelid|relhasindex|relisshared|relpersistence|relkind|relnatts|relchecks|relhasoids|relhaspkey|relhasrules|relhastriggers|relhassubclass|relrowsecurity|relforcerowsecurity|relispopulated|relreplident|relispartition|relfrozenxid|relminmxid|relacl|reloptions|relpartbound|oid|description|partition_expr|partition_key|objid|refobjsubid
1|octoonerowtable|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||1|||||
3|pg_catalog.pg_namespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||3|||||
8|pg_catalog.pg_type|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||8|||||
40|pg_catalog.pg_class|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||40|||||
75|pg_catalog.pg_description|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||75|||||
81|information_schema.tables|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||81|||||
95|pg_catalog.pg_proc|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||95|||||
125|pg_catalog.pg_attribute|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||125|||||
152|pg_catalog.pg_attrdef|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||152|||||
158|pg_catalog.pg_settings|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||158|||||
175|pg_catalog.pg_database|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||175|||||
190|pg_catalog.pg_roles|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||190|||||
204|pg_catalog.pg_user|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||204|||||
403|pg_catalog.pg_range|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||403|||||
410|pg_catalog.pg_enum|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||410|||||
415|pg_catalog.pg_index|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||415|||||
436|pg_catalog.pg_constraint|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||436|||||
462|pg_catalog.pg_am|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||462|||||
467|pg_catalog.pg_depend|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||467|||||
475|pg_catalog.pg_trigger|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||475|||||
494|pg_catalog.pg_tablespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||494|||||
500|pg_catalog.pg_shdescription|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||500|||||
505|pg_catalog.pg_inherits|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||505|||||
509|pg_catalog.pg_policies|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||509|||||
518|pg_catalog.pg_rewrite|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||518|||||
527|pg_catalog.pg_conversion|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||527|||||
536|pg_catalog.pg_aggregate|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||536|||||
559|pg_catalog.pg_language|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||559|||||
569|pg_namespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||569|||||
574|pg_type|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||574|||||
606|pg_class|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||606|||||
641|pg_description|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||641|||||
647|pg_proc|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||647|||||
677|pg_attribute|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||677|||||
704|pg_attrdef|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||704|||||
710|pg_settings|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||710|||||
727|pg_database|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||727|||||
742|pg_roles|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||742|||||
756|pg_user|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||756|||||
766|pg_range|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||766|||||
773|pg_enum|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||773|||||
778|pg_index|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||778|||||
799|pg_constraint|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||799|||||
825|pg_am|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||825|||||
830|pg_depend|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||830|||||
838|pg_trigger|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||838|||||
857|pg_tablespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||857|||||
863|pg_shdescription|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||863|||||
868|pg_inherits|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||868|||||
872|pg_policies|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||872|||||
881|pg_rewrite|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||881|||||
890|pg_conversion|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||890|||||
899|pg_aggregate|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||899|||||
922|pg_language|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||922|||||
948|names|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||948|||||
952|nameswithages|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||952|||||
(56 rows)
OCTO> SELECT c.oid,c.*,d.description,pg_catalog.pg_get_expr(c.relpartbound, c.oid) as partition_expr,  pg_catalog.pg_get_partkeydef(c.oid) as partition_key
FROM pg_catalog.pg_class c
LEFT OUTER JOIN pg_catalog.pg_description d ON d.objoid=c.oid AND d.objsubid=0 AND d.classoid='pg_class'::regclass
WHERE c.relnamespace=2200 AND c.relkind not in ('i','I','c');
oid|relname|relnamespace|reltype|reloftype|relowner|relam|relfilenode|reltablespace|relpages|reltuples|relallvisible|reltoastrelid|relhasindex|relisshared|relpersistence|relkind|relnatts|relchecks|relhasoids|relhaspkey|relhasrules|relhastriggers|relhassubclass|relrowsecurity|relforcerowsecurity|relispopulated|relreplident|relispartition|relfrozenxid|relminmxid|relacl|reloptions|relpartbound|oid|description|partition_expr|partition_key
1|octoonerowtable|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||1|||
3|pg_catalog.pg_namespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||3|||
8|pg_catalog.pg_type|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||8|||
40|pg_catalog.pg_class|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||40|||
75|pg_catalog.pg_description|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||75|||
81|information_schema.tables|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||81|||
95|pg_catalog.pg_proc|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||95|||
125|pg_catalog.pg_attribute|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||125|||
152|pg_catalog.pg_attrdef|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||152|||
158|pg_catalog.pg_settings|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||158|||
175|pg_catalog.pg_database|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||175|||
190|pg_catalog.pg_roles|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||190|||
204|pg_catalog.pg_user|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||204|||
403|pg_catalog.pg_range|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||403|||
410|pg_catalog.pg_enum|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||410|||
415|pg_catalog.pg_index|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||415|||
436|pg_catalog.pg_constraint|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||436|||
462|pg_catalog.pg_am|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||462|||
467|pg_catalog.pg_depend|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||467|||
475|pg_catalog.pg_trigger|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||475|||
494|pg_catalog.pg_tablespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||494|||
500|pg_catalog.pg_shdescription|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||500|||
505|pg_catalog.pg_inherits|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||505|||
509|pg_catalog.pg_policies|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||509|||
518|pg_catalog.pg_rewrite|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||518|||
527|pg_catalog.pg_conversion|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||527|||
536|pg_catalog.pg_aggregate|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||536|||
559|pg_catalog.pg_language|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||559|||
569|pg_namespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||569|||
574|pg_type|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||574|||
606|pg_class|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||606|||
641|pg_description|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||641|||
647|pg_proc|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||647|||
677|pg_attribute|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||677|||
704|pg_attrdef|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||704|||
710|pg_settings|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||710|||
727|pg_database|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||727|||
742|pg_roles|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||742|||
756|pg_user|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||756|||
766|pg_range|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||766|||
773|pg_enum|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||773|||
778|pg_index|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||778|||
799|pg_constraint|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||799|||
825|pg_am|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||825|||
830|pg_depend|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||830|||
838|pg_trigger|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||838|||
857|pg_tablespace|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||857|||
863|pg_shdescription|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||863|||
868|pg_inherits|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||868|||
872|pg_policies|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||872|||
881|pg_rewrite|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||881|||
890|pg_conversion|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||890|||
899|pg_aggregate|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||899|||
922|pg_language|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||922|||
948|names|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||948|||
952|nameswithages|2200|16388|0|16385|0|16386|0|0|0|0|16389|1|0|p|r|3|0|0|1|0|0|0|0|0|1|d|0|571|1||||952|||
(56 rows)
OCTO> SELECT count(*)
FROM pg_depend dep
LEFT JOIN pg_class cl ON dep.objid=cl.oid
LEFT JOIN pg_attribute att ON dep.objid=att.attrelid AND dep.objsubid=att.attnum
LEFT JOIN pg_namespace nsc ON cl.relnamespace=nsc.oid
LEFT JOIN pg_proc pr ON dep.objid=pr.oid
LEFT JOIN pg_namespace nsp ON pr.pronamespace=nsp.oid
LEFT JOIN pg_trigger tg ON dep.objid=tg.oid
LEFT JOIN pg_class tgr ON tg.tgrelid=tgr.oid
LEFT JOIN pg_namespace tgrn ON tgr.relnamespace=tgrn.oid
LEFT JOIN pg_type ty ON dep.objid=ty.oid
LEFT JOIN pg_namespace nst ON ty.typnamespace=nst.oid
LEFT JOIN pg_constraint co ON dep.objid=co.oid
LEFT JOIN pg_class coc ON co.conrelid=coc.oid
LEFT JOIN pg_namespace nso ON co.connamespace=nso.oid
LEFT JOIN pg_rewrite rw ON dep.objid=rw.oid
LEFT JOIN pg_class clrw ON clrw.oid=rw.ev_class
LEFT JOIN pg_namespace nsrw ON clrw.relnamespace=nsrw.oid
LEFT JOIN pg_language la ON dep.objid=la.oid
LEFT JOIN pg_namespace ns ON dep.objid=ns.oid
LEFT JOIN pg_attrdef ad ON ad.oid=dep.objid
LEFT JOIN pg_attribute attr ON attr.attrelid=ad.adrelid and attr.attnum=ad.adnum;
count(*)
0
(1 row)
OCTO> SELECT DISTINCT dep.deptype, dep.classid, dep.objid, cl.relkind, attr.attname,pg_get_expr(ad.adbin, ad.adrelid) adefval,
    CASE WHEN cl.relkind IS NOT NULL THEN cl.relkind::text || COALESCE(dep.objsubid::text, '')::text
        WHEN tg.oid IS NOT NULL THEN 'T'::text
        WHEN ty.oid IS NOT NULL THEN 'y'::text
        WHEN ns.oid IS NOT NULL THEN 'n'::text
        WHEN pr.oid IS NOT NULL THEN 'p'::text
        WHEN la.oid IS NOT NULL THEN 'l'::text
        WHEN rw.oid IS NOT NULL THEN 'R'::text
        WHEN co.oid IS NOT NULL THEN 'C'::text || contype::text
        WHEN ad.oid IS NOT NULL THEN 'A'::text
        ELSE ''
    END AS type,
    COALESCE(coc.relname, clrw.relname, tgr.relname) AS ownertable,
    CASE WHEN cl.relname IS NOT NULL AND att.attname IS NOT NULL THEN cl.relname || '.' || att.attname
    ELSE COALESCE(cl.relname, co.conname, pr.proname, tg.tgname, ty.typname, la.lanname, rw.rulename, ns.nspname)
    END AS refname,
    COALESCE(nsc.nspname, nso.nspname, nsp.nspname, nst.nspname, nsrw.nspname, tgrn.nspname) AS nspname
FROM pg_depend dep
LEFT JOIN pg_class cl ON dep.objid=cl.oid
LEFT JOIN pg_attribute att ON dep.objid=att.attrelid AND dep.objsubid=att.attnum
LEFT JOIN pg_namespace nsc ON cl.relnamespace=nsc.oid
LEFT JOIN pg_proc pr ON dep.objid=pr.oid
LEFT JOIN pg_namespace nsp ON pr.pronamespace=nsp.oid
LEFT JOIN pg_trigger tg ON dep.objid=tg.oid
LEFT JOIN pg_class tgr ON tg.tgrelid=tgr.oid
LEFT JOIN pg_namespace tgrn ON tgr.relnamespace=tgrn.oid
LEFT JOIN pg_type ty ON dep.objid=ty.oid
LEFT JOIN pg_namespace nst ON ty.typnamespace=nst.oid
LEFT JOIN pg_constraint co ON dep.objid=co.oid
LEFT JOIN pg_class coc ON co.conrelid=coc.oid
LEFT JOIN pg_namespace nso ON co.connamespace=nso.oid
LEFT JOIN pg_rewrite rw ON dep.objid=rw.oid
LEFT JOIN pg_class clrw ON clrw.oid=rw.ev_class
LEFT JOIN pg_namespace nsrw ON clrw.relnamespace=nsrw.oid
LEFT JOIN pg_language la ON dep.objid=la.oid
LEFT JOIN pg_namespace ns ON dep.objid=ns.oid
LEFT JOIN pg_attrdef ad ON ad.oid=dep.objid
LEFT JOIN pg_attribute attr ON attr.attrelid=ad.adrelid and attr.attnum=ad.adnum
WHERE dep.refobjid=1
ORDER BY type;
deptype|classid|objid|relkind|attname|adefval|type|ownertable|refname|nspname
(0 rows)
OCTO> 
